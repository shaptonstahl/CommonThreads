{
    "contents" : "#' CommonThreads\n\n# Remove detrius and start with a clean session\nsource(\"external_code/Decruft.R\")\n\n#####  Load libraries  #####\nsource(\"http://www.haptonstahl.org/R/usePackage/usePackage.R\")  # provides UsePackage\nUsePackage(\"dummies\")           # provides access to MySQL database\n\n#####  Set options  #####\n# options(stringsAsFactors = FALSE)\n\n#####  Load functions  #####\n\n#####  DataFrameClasses  #####\n#' Retrieve the class of each column in a data.frame\n#'\n#' A longer description of the function.  This can be perhaps\n#' a paragraph, perhaps more than one.\n#' \n#' @param X data.frame.\n#' @return character vector with names of classes of each column of X\n#' @export\n#' @seealso \\code{\\link{Related function}}\n#' @references\n#' Include papers, Web sites, etc.\n#' \\url{http://www.haptonstahl.org/R}\n#' @author Stephen R. Haptonstahl \\email{srh@@haptonstahl.org}\n#' @examples\n#' data(iris)   # provides example data\n#' DataFrameClasses(iris)\nDataFrameClasses <- function(X) {\n  # Guardians\n  stopifnot(class(X) == \"data.frame\")\n  \n  # perform the function\n  out <- sapply(1:ncol(X), function(i) class(X[,i]))\n  \n  # prepare and return the output\n  return(out)\n}\n#' data(iris)   # provides example data\n#' DataFrameClasses(iris)\n#####\n\n#####  is.subset  #####\n#' Checks to see if the elements of one vector/array are contained\n#' in another vector/array\n#'\n#' @param x vector or coercible to one\n#' @param y vector or coercible to one\n#' @return logical singleton\n#' @export\n#' @seealso \\code{\\link{CommonThreads}}\n#' @references\n#' Include papers, Web sites, etc.\n#' \\url{http://www.haptonstahl.org/R}\n#' @author Stephen R. Haptonstahl \\email{srh@@haptonstahl.org}\n#' @examples\n#' is.subset(1:3, 1:5)  # returns TRUE\n#' is.subset(1:5, 1:3)  # returns FALSE\n#' is.subset(array(1:9, dim=c(3,3)), c(1:100))  # returns TRUE\n#' is.subset(matrix(1:200, ncol=2), array(1:125, dim=c(5,5,5)))  # returns FALSE\nis.subset <- function(x, y) {\n  # Guardians\n  stopifnot(is(x, \"vector\"),\n            is(y, \"vector\")\n  )\n  \n  # deal with default and missing values\n  \n  # perform the function\n  out <- all(x %in% y)\n  # prepare and return the output\n  return(out)\n}\n#####\n\n#####  CommonThreads  #####\n#' Which variables best explain membership?\n#'\n#' Identify which variables explain best why these observations/nodes\n#' are distinct from those observations.\n#' \n#' @param X data.frame of observations\n#' @param members numeric vector of rows included or logical vector with TRUE for members\n#' @param check.combinations logical or numeric indicating whether all categorical (if TRUE) or indicated categorical variables (if numeric) should check all subsets of the factor levels.\n#' @return data.frame with variables column.name, column.index, std.coef\n#' @export\n#' @seealso \\code{\\link{CommonThreadDescriptions}}\n#' @seealso \\code{\\link{DataFrameClasses}}\n#' @seealso \\code{\\link{is.subset}}\n#' @references\n#' Include papers, Web sites, etc.\n#' \\url{http://www.haptonstahl.org/R}\n#' @author Stephen R. Haptonstahl \\email{srh@@haptonstahl.org}\n#' @examples\n#' data(iris)   # provides example data\n#' x <- Function(1, 2)     # Does something simple\n#' x                       # Display result\n#' \n#' y <- Function(1, 2, 3)  # Does something more complicated\n#' y                       # Display result\nCommonThreads <- function(X,\n                          members,\n                          check.combinations=FALSE) {\n  # Guardians\n  stopifnot(is(X, \"data.frame\") && nrow(X) >= 2,\n            (is(members, \"logical\") && length(members) == nrow(X)) || \n              (is(members, \"numeric\") && is.subset(members, 1:nrow(X))),\n            is(check.combinations, \"logical\") ||\n              (is(check.combinations, \"numeric\") && is.subset(check.combinations, 1:ncol(X)))\n            require(dummies)\n  )\n  \n  # deal with default and missing values\n  if( is(members, \"logical\") ) members <- which(members)\n  members <- unique(members)\n  if( is(check.combinations, \"logical\") ) {\n    if( TRUE == check.combinations ) {\n      check.combinations <- which(DataFrameClasses(X) %in% c(\"factor\", \"character\"))\n    }\n    check.combinations <- numeric(0)\n  }\n  \n  # perform the function\n  data.std <- capply(X, function(x) return( (x-mean(x))/sd(x) ))\n  \n  y <- rep(0, nrow(data.std))\n  y[members] <- 1\n  \n  probit.result <- glm(y ~ data.std)\n  \n  # prepare and return the output\n  out <- NULL\n  return(out)\n}\n#####",
    "created" : 1369708743241.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3489525838",
    "id" : "3F27C0F",
    "lastKnownWriteTime" : 1358266780,
    "path" : "~/GitHub/network-analytics/CommonThreads/experiment.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}